<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="node_modules/lightbox2/dist/css/lightbox.min.css">
    <title>Carusel</title>
</head>
<body>

    <div class="container">
        <h1 class="text-center">Галерея</h1>
        <div class="row ms-1 mb-2">
            <div class="col-md-3 border rounded-start-3">
                <div class="mt-3">
                    <label for="speed" class="form-label">Швидкість</label>
                    <input type="number" class="form-control" id="speed" value="1000">
                </div> 
            </div>
            <div class="col-md-3 border rounded-end-3">
                <div class="mb-3 mt-2">
                    <button style="width: 100px;" class="btn btn-success mb-1" id="btnSetSpeed">Застусуати</button>                
                    <button style="width: 100px;" class="btn btn-info" id="btnStop">Зупинити</button>                                    
                </div> 
            </div>
        </div>

        <div id="gallery">
            
        </div>
    </div>

    <div class="row">
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="card">
                    <a href="images/img1.jpg" data-lightbox="set-nature" data-title="Наше озеро">
                        <img class="card-img-top img-fluid" src="images/img1.jpg" alt="gallery">
                    </a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card">
                    <a href="images/img2.jpg" data-lightbox="set-nature" data-title="Коньйон">
                        <img class="card-img-top img-fluid" src="images/img2.jpg" alt="gallery">
                    </a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card">
                    <a href="images/img3.jpg" data-lightbox="set-nature" data-title="Серпантин">
                        <img class="card-img-top img-fluid" src="images/img3.jpg" alt="gallery">
                    </a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card">
                    <a href="images/img4.jpg" data-lightbox="set-nature" data-title="Ведмідь">
                        <img class="card-img-top img-fluid" src="images/img4.jpg" alt="gallery">
                    </a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card">
                    <a href="images/img5.jpg" data-lightbox="set-nature" data-title="Птах">
                        <img class="card-img-top img-fluid" src="images/img5.jpg" alt="gallery">
                    </a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="card">
                    <a href="images/img6.jpg" data-lightbox="set-nature" data-title="Дівчина">
                        <img class="card-img-top img-fluid" src="images/img6.jpg" alt="gallery">
                    </a>
                </div>
            </div>
        </div>
    </div>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="node_modules/lightbox2/dist/js/lightbox.min.js"></script>

    <script>
        $(() => {

            const photos = [
                'images/img1.jpg',
                "images/img2.jpg",
                "images/img3.jpg",
                "images/img4.jpg",
                "images/img5.jpg",
                "images/img6.jpg"
            ];

            let i = 0; //поточний індекс масиві
            const speedInput = $("#speed");
            const btnSetSpeed = $("#btnSetSpeed");
            const btnStop = $("#btnStop");
            let intervalId;
            btnSetSpeed.on("click", () => {
                const speed = speedInput.val();

                if (isNaN(speed) || speed <= 0) {
                    alert("Please enter a valid positive number for speed.");
                    return;
                }
                clearInterval(intervalId); // Очищаю інтервел
                intervalId = setInterval(showImage, speed); // Задаю інтервел з новою швидкістю
            });

            btnStop.on("click", () => { clearInterval(intervalId); })

            
            const showImage = () => {
                const img = $(`<img src="${photos[i]}" width="500px" alt="Photo ${i + 1}">`);
                $("#gallery").html(img);
                // У циклі мотаємо фотки
                i = (i + 1) % photos.length; 
            }

            //Викликає метод із частотою 500 мс (0.5 сек)
            intervalId = setInterval(showImage, speedInput.val());
        });

    </script>
</body>
</html>